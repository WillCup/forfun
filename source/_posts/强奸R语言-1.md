title: 强奸R语言 1
date: 2015-12-03 19:09:11
tags: [R]
---
就是为了学习一些机器学习的知识，需要用到R语言，但是感觉专门再去研究一门语言有些太繁琐。所以索性直接上手，也就是抄写各种机器学习的R程序。

首先弄的是文本挖掘的小程序：http://mp.weixin.qq.com/s?__biz=MzA3MDg0MjgxNQ==&mid=400900310&idx=1&sn=4002ae3fc938a46060558480f0583fb2&3rd=MzA3MDU4NTYzMw==&scene=6#rd

好，文章里面提示要安装package。
搜一下R安装package的方法：http://www.r-bloggers.com/installing-r-packages/

先尝试图形界面，简单。
使用R的图形界面找不到Snowball这个分词程序
![](/imgs/r/图形界面找不到Snowball.png)

再使用命令行：
```r
install.packages("Snowball")
Warning message:
package ‘Snowball’ is not available (for R version 3.2.2)
```

到Google搜索 r snowball，定位到 https://cran.r-project.org/src/contrib/Archive/Snowball/
> wget https://cran.r-project.org/src/contrib/Archive/Snowball/Snowball_0.0-11.tar.gz

```r
> getwd()   // 获取当前工作目录
[1] "/Users/will"
> setwd('/Users/will/softs/clean')      //设置工作目录到刚才下载的包那里
> getwd()
[1] "/Users/will/softs/clean"
> install.packages("Snowball_0.0-11.tar.gz")    // 再次安装
inferring 'repos = NULL' from 'pkgs'
ERROR: dependencies ‘RWeka’, ‘rJava’ are not available for package ‘Snowball’
* removing ‘/Library/Frameworks/R.framework/Versions/3.2/Resources/library/Snowball’
Warning message:
In install.packages("Snowball_0.0-11.tar.gz") :
  安装程序包‘Snowball_0.0-11.tar.gz’时退出狀態的值不是0
```
可以看到上面报出两个package找不到:RWeka和rJava

尝试一下有么有像maven一样自动下载依赖的方法：
```r
> install.packages("Snowball_0.0-11.tar.gz", dependencies=TRUE)
inferring 'repos = NULL' from 'pkgs'
* installing *source* package ‘Snowball’ ...
** 成功将‘Snowball’程序包解包并MD5和检查
** R
** inst
** preparing package for lazy loading
Warning message:
In install.packages("Snowball_0.0-11.tar.gz", dependencies = TRUE) :
  安装程序包‘Snowball_0.0-11.tar.gz’时退出狀態的值不是0
No Java runtime present, requesting install.
```
马达, mac提示让安装1.6版本的jdk才行，日了。
```
java version "1.7.0_80"
Java(TM) SE Runtime Environment (build 1.7.0_80-b15)
Java HotSpot(TM) 64-Bit Server VM (build 24.80-b11, mixed mode)
```
自己手动来
```r
> install.packages('RWeka')
also installing the dependencies ‘RWekajars’, ‘rJava’

试开URL’https://dirichlet.mat.puc.cl/bin/macosx/mavericks/contrib/3.2/RWekajars_3.7.12-1.tgz'
Content type 'application/x-gzip' length 6473509 bytes (6.2 MB)
==================================================
downloaded 6.2 MB

试开URL’https://dirichlet.mat.puc.cl/bin/macosx/mavericks/contrib/3.2/rJava_0.9-7.tgz'
Content type 'application/x-gzip' length 604271 bytes (590 KB)
==================================================
downloaded 590 KB

试开URL’https://dirichlet.mat.puc.cl/bin/macosx/mavericks/contrib/3.2/RWeka_0.4-24.tgz'
Content type 'application/x-gzip' length 536260 bytes (523 KB)
==================================================
downloaded 523 KB
```

同样的方式，安装其他包(*安装的时候需要注意当前目录getwd一下，是不是源package所在的位置*)

> wget http://download.r-forge.r-project.org/src/contrib/Rwordseg_0.2-1.tar.gz

```r
> install.packages("Rwordseg_0.2-1.tar.gz", dependencies=TRUE)
inferring 'repos = NULL' from 'pkgs'
* installing *source* package ‘Rwordseg’ ...
** R
** demo
** inst
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded
* DONE (Rwordseg)

> install.packages("tm")
also installing the dependencies ‘NLP’, ‘slam’

试开URL’https://dirichlet.mat.puc.cl/bin/macosx/mavericks/contrib/3.2/NLP_0.1-8.tgz'
Content type 'application/x-gzip' length 275184 bytes (268 KB)
==================================================
downloaded 268 KB

试开URL’https://dirichlet.mat.puc.cl/bin/macosx/mavericks/contrib/3.2/slam_0.1-32.tgz'
Content type 'application/x-gzip' length 101732 bytes (99 KB)
==================================================
downloaded 99 KB

试开URL’https://dirichlet.mat.puc.cl/bin/macosx/mavericks/contrib/3.2/tm_0.6-2.tgz'
Content type 'application/x-gzip' length 660405 bytes (644 KB)
==================================================
downloaded 644 KB


下载的二进制程序包在
    /var/folders/j_/gk6hxy7x705419zqy5sm167w0000gn/T//RtmpXdkdjK/downloaded_packages里
```



## 杂记
```r
> library("arulesViz")
> data("Groceries") #加载指定的数据集
> summary(Groceries)    # 查看
transactions as itemMatrix in sparse format with
 9835 rows (elements/itemsets/transactions) and
 169 columns (items) and a density of 0.02609146 

most frequent items:
      whole milk other vegetables       rolls/buns             soda 
            2513             1903             1809             1715 
          yogurt          (Other) 
            1372            34055 

element (itemset/transaction) length distribution:
sizes
   1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 
2159 1643 1299 1005  855  645  545  438  350  246  182  117   78   77   55 
  16   17   18   19   20   21   22   23   24   26   27   28   29   32 
  46   29   14   14    9   11    4    6    1    1    1    1    3    1 

   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.000   2.000   3.000   4.409   6.000  32.000 

includes extended item information - examples:
       labels  level2           level1
1 frankfurter sausage meet and sausage
2     sausage sausage meet and sausage
3  liver loaf sausage meet and sausage
```
min: 最小值
1st Qu: 一分位数
Median: 中位数
Mean: 平均值
3rd Qu: 三分位数
Max： 最大值
most frequent items： 最频繁出现的item

```
> rules <- apriori(Groceries, parameter = list(support = 0.001, confidence = 0.5))
Apriori

Parameter specification:
 confidence minval smax arem  aval originalSupport support minlen maxlen
        0.5    0.1    1 none FALSE            TRUE   0.001      1     10
 target   ext
  rules FALSE

Algorithmic control:
 filter tree heap memopt load sort verbose
    0.1 TRUE TRUE  FALSE TRUE    2    TRUE

Absolute minimum support count: 9 

set item appearances ...[0 item(s)] done [0.00s].
set transactions ...[169 item(s), 9835 transaction(s)] done [0.00s].
sorting and recoding items ... [157 item(s)] done [0.00s].
creating transaction tree ... done [0.00s].
checking subsets of size 1 2 3 4 5 6 done [0.01s].
writing ... [5668 rule(s)] done [0.00s].
creating S4 object  ... done [0.00s].
> rules
set of 5668 rules 
> inspect(head(sort(rules, by = "lift"), 3))
    lhs                             rhs              support     confidence
53  {Instant food products,soda} => {hamburger meat} 0.001220132 0.6315789 
37  {soda,popcorn}               => {salty snack}    0.001220132 0.6315789 
444 {flour,baking powder}        => {sugar}          0.001016777 0.5555556 
    lift    
53  18.99565
37  16.69779
444 16.40807
> inspect(head(sort(rules, by = "lift"), 3))
    lhs                             rhs              support     confidence lift    
53  {Instant food products,soda} => {hamburger meat} 0.001220132 0.6315789  18.99565
37  {soda,popcorn}               => {salty snack}    0.001220132 0.6315789  16.69779
444 {flour,baking powder}        => {sugar}          0.001016777 0.5555556  16.40807
> plot(rules)
> plot(rules)
>  plot(rules, measure = c("support", "lift"), shading = "confidence")
```