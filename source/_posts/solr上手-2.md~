title: solr上手（二）
date: 2015-08-04 10:16:18
tags: [solr]
---

前面是提到了solr是支持很多中其他交流方式的。这章我们使用solr的REST API进行查询工作。

### 简单查询
首先在主界面选择我们要查询的core，然后点击query，默认查询的条件是*:*，也就是任何字段任何值都是可以接收的，也就是全量数据了。

![2.1 solr的web端查询.png](/imgs/solr/2.1 solr的web端查询.png)

单击请求的实际URL部分，可以跳入这个请求：http://localhost:8983/solr/willCollection_shard1_replica1/select?q=*%3A*&wt=json&indent=true

### 基本查询
> curl "http://localhost:8983/solr/gettingstarted/select?wt=json&indent=true&q=foundation&fl=id"
把×换成了foundation，也就是包含这个foundation关键字的doc，然后后面的fl指定了我们要的字段，所以结果如下图：
![2.2 solr简单查询-全文匹配 -取指定字段.png](/imgs/solr/2.2 solr简单查询-指定字段.png)

> curl "http://localhost:8983/solr/gettingstarted/select?wt=json&indent=true&q=cat:book"
上面这个查询q后面成了cat:book，其实q可以是key:value的方式来查询满足条件的doc。
![2.3 solr简单查询-字段匹配 -取指定字段.png](/imgs/solr/2.3 solr简单查询-字段匹配.png)

### 短语查询
如果要匹配多个单词组合起来的短语，就需要使用双引号：q="multiple terms here",而且在URL中需要把空格替换为+加号,如下所示：
> curl "http://localhost:8983/solr/gettingstarted/select?wt=json&indent=true&q=\"CAS+latency\""
![2.4 solr短语查询.png](/imgs/solr/2.4 solr短语查询.png)

### 组合查询
有时我们需要在一个查询中匹配多个单词或短语，有时也需要除去一些不需要的，这时就用到了组合查询。当我们想要某个匹配项的时候就使用+，不想要就使用-

![2.5 solr组合查询.png](/imgs/solr/2.5 solr组合查询.png)
